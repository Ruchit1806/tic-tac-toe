<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Tic Tac Toe - AI Mode</title>

  <style>
    body, html {
      margin: 0; padding: 0;
      font-family: Arial, sans-serif;
      background-color: #f9f9f9;
      color: #000;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      align-items: center;
    }

    header {
      width: 100%;
      padding: 20px;
      background-color: #007bff;
      color: white;
      font-size: 1.5rem;
      font-weight: bold;
      text-align: center;
      margin-bottom: 20px;
    }

    .controls {
      display: flex;
      flex-direction: column;  /* Stack vertically */
      align-items: center;
      gap: 15px;               /* Space between controls */
      margin-bottom: 20px;
      width: 100%;
      max-width: 320px;
    }

    button, select, label {
      cursor: pointer;
      font-size: 1rem;
      border-radius: 5px;
      border: none;
      padding: 10px 20px;
      width: 100%;
      max-width: 300px;
      background-color: #007bff;
      color: white;
      transition: background-color 0.3s ease;
      user-select: none;
      box-sizing: border-box;
    }

    label {
      cursor: default;
      background: none;
      color: #000;
      font-weight: bold;
      padding: 0;
      margin: 0;
      width: auto;
      text-align: left;
      color: #333;
    }

    button:hover, select:hover {
      background-color: #0056b3;
    }

    .game-board {
      display: grid;
      grid-template-columns: repeat(3, 100px);
      grid-template-rows: repeat(3, 100px);
      gap: 10px;
      justify-content: center;
      margin-bottom: 20px;
    }

    .cell {
      background-color: #eee;
      border: 2px solid #333;
      font-size: 3rem;
      display: flex;
      justify-content: center;
      align-items: center;
      cursor: pointer;
      user-select: none;
      border-radius: 8px;
      transition: background-color 0.3s ease;
      width: 100px;
      height: 100px;
    }

    .cell:hover {
      background-color: #ddd;
    }

    .info {
      font-size: 1.2rem;
      margin-bottom: 20px;
      min-height: 1.5em;
      color: #222;
      max-width: 320px;
      text-align: center;
    }

    /* Dark mode styles */
    html.dark-mode, body.dark-mode {
      background-color: #121212;
      color: white;
    }

    html.dark-mode header, body.dark-mode header {
      background-color: #222;
      color: #eee;
    }

    html.dark-mode button, html.dark-mode select,
    body.dark-mode button, body.dark-mode select {
      background-color: #444;
      color: white;
    }

    html.dark-mode button:hover, html.dark-mode select:hover,
    body.dark-mode button:hover, body.dark-mode select:hover {
      background-color: #666;
    }

    html.dark-mode .cell, body.dark-mode .cell {
      background-color: #333;
      border-color: #888;
      color: white;
    }

    html.dark-mode .cell:hover, body.dark-mode .cell:hover {
      background-color: #555;
    }

    html.dark-mode .info, body.dark-mode .info {
      color: #ddd;
    }
  </style>
</head>
<body>
  <header>
    Tic Tac Toe - AI Mode
  </header>

  <div class="controls">
    <button id="toggle-theme">Toggle Dark Mode</button>

    <label for="difficulty">Select Difficulty:</label>
    <select id="difficulty">
      <option value="easy">Easy</option>
      <option value="difficult">Difficult</option>
    </select>

    <button id="restart">Restart Game</button>

    <button id="homePageBtn">Home Page</button>
  </div>

  <div class="game-board" id="game-board">
    <div class="cell" data-index="0"></div>
    <div class="cell" data-index="1"></div>
    <div class="cell" data-index="2"></div>
    <div class="cell" data-index="3"></div>
    <div class="cell" data-index="4"></div>
    <div class="cell" data-index="5"></div>
    <div class="cell" data-index="6"></div>
    <div class="cell" data-index="7"></div>
    <div class="cell" data-index="8"></div>
  </div>

  <div class="info" id="status">Your turn</div>

  <script>
    // Dark mode toggle
    const toggleBtn = document.getElementById('toggle-theme');
    toggleBtn.addEventListener('click', () => {
      document.documentElement.classList.toggle('dark-mode');
      document.body.classList.toggle('dark-mode');
      const mode = document.documentElement.classList.contains('dark-mode') ? 'dark' : 'light';
      localStorage.setItem('theme', mode);
    });

    // On load apply theme
    window.onload = () => {
      if (localStorage.getItem('theme') === 'dark') {
        document.documentElement.classList.add('dark-mode');
        document.body.classList.add('dark-mode');
      }
    };

    // Home button
    document.getElementById('homePageBtn').addEventListener('click', () => {
      window.location.href = 'index.html';
    });

    // Game variables
    const board = Array(9).fill(null);
    const cells = document.querySelectorAll('.cell');
    const statusDiv = document.getElementById('status');
    let playerTurn = true;

    // Difficulty select
    const difficultySelect = document.getElementById('difficulty');

    // Winning combos
    const winningCombos = [
      [0,1,2],[3,4,5],[6,7,8],
      [0,3,6],[1,4,7],[2,5,8],
      [0,4,8],[2,4,6]
    ];

    function checkWinner(board) {
      for (let combo of winningCombos) {
        const [a,b,c] = combo;
        if (board[a] && board[a] === board[b] && board[b] === board[c]) {
          return board[a];
        }
      }
      if (board.every(cell => cell !== null)) return 'draw';
      return null;
    }

    function renderBoard() {
      board.forEach((val, idx) => {
        cells[idx].textContent = val ? val : '';
      });
    }

    function playerMove(idx) {
      if (board[idx] === null && playerTurn) {
        board[idx] = 'X';
        playerTurn = false;
        renderBoard();
        checkGameStatus();
        if (!playerTurn) setTimeout(aiMove, 500);
      }
    }

    function aiMove() {
      if (difficultySelect.value === 'easy') aiMoveEasy();
      else aiMoveDifficult();
    }

    function aiMoveEasy() {
      const emptyIndices = board.map((v,i) => v === null ? i : null).filter(i => i !== null);
      if (emptyIndices.length === 0) return;
      const choice = emptyIndices[Math.floor(Math.random() * emptyIndices.length)];
      board[choice] = 'O';
      playerTurn = true;
      renderBoard();
      checkGameStatus();
    }

    function aiMoveDifficult() {
      let bestScore = -Infinity;
      let move;
      for(let i=0; i<9; i++) {
        if(board[i] === null) {
          board[i] = 'O';
          let score = minimax(board, 0, false);
          board[i] = null;
          if(score > bestScore) {
            bestScore = score;
            move = i;
          }
        }
      }
      if (move !== undefined) board[move] = 'O';
      playerTurn = true;
      renderBoard();
      checkGameStatus();
    }

    function minimax(boardState, depth, isMaximizing) {
      const winner = checkWinner(boardState);
      if (winner === 'O') return 10 - depth;
      if (winner === 'X') return depth - 10;
      if (winner === 'draw') return 0;

      if (isMaximizing) {
        let bestScore = -Infinity;
        for(let i=0; i<9; i++) {
          if(boardState[i] === null) {
            boardState[i] = 'O';
            let score = minimax(boardState, depth + 1, false);
            boardState[i] = null;
            bestScore = Math.max(score, bestScore);
          }
        }
        return bestScore;
      } else {
        let bestScore = Infinity;
        for(let i=0; i<9; i++) {
          if(boardState[i] === null) {
            boardState[i] = 'X';
            let score = minimax(boardState, depth + 1, true);
            boardState[i] = null;
            bestScore = Math.min(score, bestScore);
          }
        }
        return bestScore;
      }
    }

    function checkGameStatus() {
      const winner = checkWinner(board);
      if (winner === 'X') {
        statusDiv.textContent = "You won! ðŸŽ‰";
        endGame();
      } else if (winner === 'O') {
        statusDiv.textContent = "AI won! ðŸ¤–";
        endGame();
      } else if (winner === 'draw') {
        statusDiv.textContent = "It's a draw!";
        endGame();
      } else {
        statusDiv.textContent = playerTurn ? "Your turn" : "AI's turn";
      }
    }

    function endGame() {
      cells.forEach(cell => cell.removeEventListener('click', onCellClick));
    }

    function restartGame() {
      for (let i = 0; i < board.length; i++) {
        board[i] = null;
      }
      playerTurn = true;
      renderBoard();
      statusDiv.textContent = "Your turn";
      cells.forEach(cell => cell.addEventListener('click', onCellClick));
    }

    function onCellClick(e) {
      const idx = parseInt(e.target.getAttribute('data-index'));
      playerMove(idx);
    }

    cells.forEach(cell => cell.addEventListener('click', onCellClick));
    document.getElementById('restart').addEventListener('click', restartGame);
    renderBoard();
  </script>
</body>
</html>





